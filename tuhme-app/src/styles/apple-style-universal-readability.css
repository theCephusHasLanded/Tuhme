/* Apple.com-Style Universal Readability System */
/* Uses opacity masking, backdrop filters, and adaptive contrast for all system modes */

/* ===== UNIVERSAL BACKDROP OVERLAY SYSTEM ===== */

/* Main backdrop overlay that ensures readability in all modes */
.universal-backdrop {
  position: relative;
  isolation: isolate;
}

.universal-backdrop::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    linear-gradient(
      135deg, 
      rgba(0, 0, 0, 0.85) 0%, 
      rgba(0, 0, 0, 0.75) 50%, 
      rgba(0, 0, 0, 0.85) 100%
    );
  backdrop-filter: blur(0.5px) contrast(1.2) brightness(0.8);
  -webkit-backdrop-filter: blur(0.5px) contrast(1.2) brightness(0.8);
  z-index: 1;
  pointer-events: none;
}

.universal-backdrop > * {
  position: relative;
  z-index: 2;
}

/* ===== HERO SECTION UNIVERSAL FIX ===== */

.hero-luxury {
  position: relative;
  isolation: isolate;
}

.hero-luxury::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    radial-gradient(
      circle at center,
      rgba(0, 0, 0, 0.9) 0%,
      rgba(0, 0, 0, 0.85) 50%,
      rgba(0, 0, 0, 0.95) 100%
    );
  backdrop-filter: blur(1px) contrast(1.3) brightness(0.7);
  -webkit-backdrop-filter: blur(1px) contrast(1.3) brightness(0.7);
  z-index: 1;
  pointer-events: none;
}

.hero-luxury > * {
  position: relative;
  z-index: 2;
}

/* ===== UNIVERSAL TEXT CONTRAST SYSTEM ===== */

/* Multi-layer text shadow system for universal readability */
.universal-text {
  color: #ffffff !important;
  text-shadow: 
    0 0 1px rgba(0, 0, 0, 0.9),
    0 1px 2px rgba(0, 0, 0, 0.8),
    0 2px 4px rgba(0, 0, 0, 0.6),
    0 0 8px rgba(0, 0, 0, 0.4) !important;
  -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.3);
}

/* Apply universal text to all hero elements */
.hero-luxury,
.hero-luxury *,
.hero-content-luxury,
.hero-content-luxury * {
  color: #ffffff !important;
  text-shadow: 
    0 0 1px rgba(0, 0, 0, 0.9),
    0 1px 2px rgba(0, 0, 0, 0.8),
    0 2px 4px rgba(0, 0, 0, 0.6),
    0 0 8px rgba(0, 0, 0, 0.4) !important;
}

/* ===== STORE CARDS UNIVERSAL SYSTEM ===== */

.store-card,
.luxury-card,
.card,
.service-card {
  position: relative;
  isolation: isolate;
  backdrop-filter: blur(2px) contrast(1.1);
  -webkit-backdrop-filter: blur(2px) contrast(1.1);
}

.store-card::before,
.luxury-card::before,
.card::before,
.service-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    linear-gradient(
      135deg,
      rgba(0, 0, 0, 0.9) 0%,
      rgba(0, 0, 0, 0.85) 100%
    );
  border-radius: inherit;
  z-index: 1;
  pointer-events: none;
}

.store-card > *,
.luxury-card > *,
.card > *,
.service-card > * {
  position: relative;
  z-index: 2;
  color: #ffffff !important;
  text-shadow: 
    0 0 1px rgba(0, 0, 0, 0.8),
    0 1px 2px rgba(0, 0, 0, 0.6) !important;
}

/* ===== ADAPTIVE BACKGROUND SYSTEM ===== */

/* Universal background that adapts to system preferences */
body,
#root,
.app {
  background: 
    linear-gradient(
      135deg,
      rgba(0, 0, 0, 0.95) 0%,
      rgba(0, 0, 0, 0.9) 50%,
      rgba(0, 0, 0, 0.95) 100%
    ),
    #0a0a0a;
  backdrop-filter: blur(1px) contrast(1.2);
  -webkit-backdrop-filter: blur(1px) contrast(1.2);
}

/* ===== SYSTEM MODE ADAPTATIONS ===== */

/* Light mode adaptations */
@media (prefers-color-scheme: light) {
  .universal-backdrop::before {
    background: 
      linear-gradient(
        135deg, 
        rgba(0, 0, 0, 0.95) 0%, 
        rgba(0, 0, 0, 0.9) 50%, 
        rgba(0, 0, 0, 0.95) 100%
      );
    backdrop-filter: blur(1px) contrast(1.4) brightness(0.6);
    -webkit-backdrop-filter: blur(1px) contrast(1.4) brightness(0.6);
  }
  
  .hero-luxury::before {
    background: 
      radial-gradient(
        circle at center,
        rgba(0, 0, 0, 0.98) 0%,
        rgba(0, 0, 0, 0.95) 50%,
        rgba(0, 0, 0, 0.98) 100%
      );
    backdrop-filter: blur(2px) contrast(1.5) brightness(0.5);
    -webkit-backdrop-filter: blur(2px) contrast(1.5) brightness(0.5);
  }
  
  .store-card::before,
  .luxury-card::before,
  .card::before,
  .service-card::before {
    background: 
      linear-gradient(
        135deg,
        rgba(0, 0, 0, 0.95) 0%,
        rgba(0, 0, 0, 0.9) 100%
      );
    backdrop-filter: blur(3px) contrast(1.3) brightness(0.7);
    -webkit-backdrop-filter: blur(3px) contrast(1.3) brightness(0.7);
  }
  
  body,
  #root,
  .app {
    background: 
      linear-gradient(
        135deg,
        rgba(0, 0, 0, 0.98) 0%,
        rgba(0, 0, 0, 0.95) 50%,
        rgba(0, 0, 0, 0.98) 100%
      ),
      #000000;
    backdrop-filter: blur(2px) contrast(1.4) brightness(0.6);
    -webkit-backdrop-filter: blur(2px) contrast(1.4) brightness(0.6);
  }
}

/* ===== ENHANCED TEXT VISIBILITY ===== */

/* High contrast text rendering */
.enhanced-contrast {
  color: #ffffff !important;
  text-shadow: 
    0 0 1px rgba(0, 0, 0, 1),
    0 1px 3px rgba(0, 0, 0, 0.9),
    0 3px 6px rgba(0, 0, 0, 0.7),
    0 0 12px rgba(0, 0, 0, 0.5) !important;
  -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.5);
  font-weight: 500 !important;
}

/* Apply enhanced contrast to important elements */
.hero-luxury .brand-name-luxury,
.hero-luxury .hero-title-luxury,
.hero-luxury .hero-main-title {
  color: #ffffff !important;
  text-shadow: 
    0 0 2px rgba(0, 0, 0, 1),
    0 2px 4px rgba(0, 0, 0, 0.9),
    0 4px 8px rgba(0, 0, 0, 0.7),
    0 0 16px rgba(0, 0, 0, 0.5) !important;
  -webkit-text-stroke: 0.7px rgba(0, 0, 0, 0.6);
}

/* ===== MIX BLEND MODE SYSTEM ===== */

/* Universal mix blend mode for optimal contrast */
.blend-readability {
  mix-blend-mode: screen;
  background-blend-mode: multiply;
}

.blend-readability * {
  mix-blend-mode: normal;
}

/* ===== SAFARI-SPECIFIC ENHANCEMENTS ===== */

@supports (-webkit-backdrop-filter: blur(1px)) {
  .universal-backdrop::before,
  .hero-luxury::before,
  .store-card::before,
  .luxury-card::before {
    -webkit-backdrop-filter: blur(2px) contrast(1.4) brightness(0.6) saturate(1.2);
  }
  
  @media (prefers-color-scheme: light) {
    .universal-backdrop::before,
    .hero-luxury::before {
      -webkit-backdrop-filter: blur(3px) contrast(1.6) brightness(0.4) saturate(1.1);
    }
  }
}

/* ===== HIGH CONTRAST MODE SUPPORT ===== */

@media (prefers-contrast: high) {
  .universal-backdrop::before,
  .hero-luxury::before,
  .store-card::before,
  .luxury-card::before {
    background: rgba(0, 0, 0, 0.98) !important;
    backdrop-filter: contrast(2) brightness(0.3);
    -webkit-backdrop-filter: contrast(2) brightness(0.3);
  }
  
  .universal-text,
  .hero-luxury *,
  .store-card *,
  .luxury-card * {
    color: #ffffff !important;
    text-shadow: 
      0 0 2px rgba(0, 0, 0, 1),
      0 2px 4px rgba(0, 0, 0, 1) !important;
    -webkit-text-stroke: 1px rgba(0, 0, 0, 0.8);
    font-weight: 600 !important;
  }
}

/* ===== MOBILE OPTIMIZATIONS ===== */

@media screen and (max-width: 768px) {
  .universal-backdrop::before,
  .hero-luxury::before {
    backdrop-filter: blur(1.5px) contrast(1.3) brightness(0.6);
    -webkit-backdrop-filter: blur(1.5px) contrast(1.3) brightness(0.6);
  }
  
  .store-card::before,
  .luxury-card::before {
    backdrop-filter: blur(2px) contrast(1.2) brightness(0.7);
    -webkit-backdrop-filter: blur(2px) contrast(1.2) brightness(0.7);
  }
  
  .hero-luxury *,
  .store-card *,
  .luxury-card * {
    text-shadow: 
      0 0 1px rgba(0, 0, 0, 0.9),
      0 1px 2px rgba(0, 0, 0, 0.8) !important;
  }
}

/* ===== FORCED COLOR ADJUSTMENTS ===== */

/* Disable automatic adjustments to maintain our system */
.universal-backdrop,
.hero-luxury,
.store-card,
.luxury-card,
.card,
.service-card {
  forced-color-adjust: none !important;
  -webkit-forced-color-adjust: none !important;
}
